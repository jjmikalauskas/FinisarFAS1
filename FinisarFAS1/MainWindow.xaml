<Window x:Class="FinisarFAS1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:FinisarFAS1.Converters"        
        xmlns:progress="clr-namespace:ThreadingComponent"
        xmlns:local="clr-namespace:FinisarFAS1"
        xmlns:view="clr-namespace:FinisarFAS1.View"
        xmlns:vm="clr-namespace:FinisarFAS1.ViewModel"        
        mc:Ignorable="d"  WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded"
        Closing="Window_Closing" Background="Gray"
        Title="Factory Automation System - Tool: Etcher 01" Height="1000" Width="960">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="View/MainSkin.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <converters:BooleanToVisibleConverter x:Key="BooleanToVisibleConverter" />

            <Storyboard x:Key="expandWafer">
                <Storyboard TargetProperty="RenderTransform.(TranslateTransform.X)">
                    <DoubleAnimation Duration="0:0:0.5"
                                     From="0"
                                     Storyboard.TargetName="waferPanel"
                                     To="1000" />
                </Storyboard>
            </Storyboard>
            <Storyboard x:Key="collapseWafer">
                <Storyboard TargetProperty="RenderTransform.(TranslateTransform.X)">
                    <DoubleAnimation Duration="0:0:0.3"
                                     From="1000"
                                     Storyboard.TargetName="waferPanel"
                                     To="0" />
                </Storyboard>
            </Storyboard>

            <Storyboard x:Key="expandEntry">
                <Storyboard TargetProperty="RenderTransform.(TranslateTransform.X)">
                    <DoubleAnimation Duration="0:0:0.5"
                                     From="0"
                                     Storyboard.TargetName="entryPanel"
                                     To="1000" />
                </Storyboard>
            </Storyboard>
            <Storyboard x:Key="collapseEntry">
                <Storyboard TargetProperty="RenderTransform.(TranslateTransform.X)">
                    <DoubleAnimation Duration="0:0:0.3"
                                     From="1000"
                                     Storyboard.TargetName="entryPanel"
                                     To="0" />
                </Storyboard>
            </Storyboard>

            <Style TargetType="Button">
                <Setter Property="Margin" Value="15,10" />
                <Setter Property="FontSize" Value="28" />
                <Setter Property="Height" Value="50" />
                <Setter Property="Width" Value="140"/>
            </Style>
            
        </ResourceDictionary>
    </Window.Resources>

    <Window.DataContext>
        <vm:MainViewModel></vm:MainViewModel>
    </Window.DataContext>

    <!--<Window.Background>
        <ImageBrush ImageSource="/Images/Blue1.jpg" Opacity="0.9" />
    </Window.Background>-->
    
    <Window.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Storyboard.TargetProperty="(Window.Opacity)"
                                 From="0.0" To="1.0" Duration="0:0:1"
                                 AutoReverse="False"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Window.Triggers>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="6*" />
            <RowDefinition Height="1*" />
        </Grid.RowDefinitions>
        
        <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
            Margin="10,5,10,5" Background="{DynamicResource ResourceKey=BlackGlass3b}" Orientation="Vertical">
            <StackPanel Orientation="Horizontal" >
                <StackPanel Margin="5,5" Orientation="Horizontal" >
                    <Label Foreground="White" Content="Operator"/>
                    <TextBox Margin="10,0,5,0" Height="25" FontSize="16" Text="{Binding Path=Operator}"  Width="120" />
                </StackPanel>
                <StackPanel Margin="5,5" Orientation="Horizontal" >
                    <Label Foreground="White" Content="Tool ID" />
                    <TextBox Margin="10,0,5,0" Height="25" FontSize="16" Text="{Binding Path=Tool}" Width="120" />
                </StackPanel>
                <StackPanel Margin="5,5" Orientation="Horizontal" >
                    <Label Foreground="White" Content="Lot #" />
                    <TextBox Margin="10,0,5,0" Height="25" FontSize="16" Text="{Binding Path=Lot}" Width="120" />
                </StackPanel>
            </StackPanel>
            <TextBlock Margin="5,5" TextWrapping="WrapWithOverflow" 
                       FontSize="18" Height="28" Background="Red" Padding="8,0,0,0"
                       VerticalAlignment="Stretch" Foreground="White"
                       Visibility="Collapsed"
                       Text="{Binding CurrentAlarm}" />
            <!--Visibility="Collapsed"-->
            <TextBlock Margin="15,15" TextWrapping="WrapWithOverflow" 
                       FontSize="18"
                       VerticalAlignment="Stretch" Foreground="White"
                       Text="{Binding CurrentRecipe}" />
            <TabControl>
                <TabItem Width="120" Background="LightGray">
                    <TabItem.Header>
                        <Grid Margin="-5,0" Height="31" Width="120" >
                            <!--<ProgressBar Height="31" Width="120" Value="5" Foreground="Lime" />-->
                            <TextBlock Padding="24,6,0,0" Text="Load Port 1" />
                        </Grid>
                    </TabItem.Header>
                    <StackPanel Orientation="Horizontal" >
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="9*" />
                                <ColumnDefinition Width="1*" />
                            </Grid.ColumnDefinitions>
                            <DataGrid x:Name="_mainDataGrid1" 
                                  Grid.Column="0" Width="730"
                                  IsReadOnly="True" AutoGenerateColumns="False"
                                  RowHeight="24" FontSize="16" >
                                <DataGrid.RowStyle>
                                    <Style TargetType="DataGridRow">
                                        <Setter Property="Background" Value="{Binding StatusColor}"/>
                                    </Style>
                                </DataGrid.RowStyle>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Width="120"
                                                        Binding="{Binding WaferNo}"
                                                        Header="Wafer #" />
                                    <DataGridTextColumn Width="50"
                                                        Binding="{Binding Slot}"
                                                        Header="Slot" />
                                    <DataGridTextColumn Width="120" Binding="{Binding Scrap}" Header="Scrap" />
                                    <DataGridTextColumn Width="125"
                                                        Binding="{Binding Recipe}"
                                                        Header="Recipe" />
                                    <DataGridTextColumn Width="180"
                                                        Binding="{Binding Status}"
                                                        Header="Processing Status" />
                                </DataGrid.Columns>
                            </DataGrid>
                            <StackPanel Grid.Column="1">
                                <view:RightSideButtonView Height="700" />
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </TabItem>

                <TabItem  Height="30" Width="120" Background="LightGray">
                    <TabItem.Header>
                        <Grid Margin="-5,0" Height="30" Width="120" >
                            <!--<ProgressBar Height="30" Width="120" Value="25" Foreground="Lime" />-->
                            <TextBlock Padding="24,6,0,0" Text="Load Port 2" />
                        </Grid>
                    </TabItem.Header>
                    <DataGrid x:Name="_mainDataGrid2" 
                              IsReadOnly="True" AutoGenerateColumns="False"
                              RowHeight="24" FontSize="16" >
                        <DataGrid.RowStyle>
                            <Style TargetType="DataGridRow">
                                <Setter Property="Background" Value="{Binding StatusColor}"/>
                            </Style>
                        </DataGrid.RowStyle>
                        <DataGrid.Columns>
                            <DataGridTextColumn Width="65"
                                                    Binding="{Binding WaferNo}"
                                                    Header="Wafer #" />
                            <DataGridTextColumn Width="50"
                                                    Binding="{Binding Slot}"
                                                    Header="Slot" />
                            <DataGridTextColumn Width="80" Binding="{Binding Scrap}" Header="Scrap" />
                            <DataGridTextColumn Width="105"
                                                    Binding="{Binding Recipe}"
                                                    Header="Recipe" />
                            <DataGridTextColumn Width="160"
                                                    Binding="{Binding Status}"
                                                    Header="Processing Status" />
                        </DataGrid.Columns>
                    </DataGrid>
                </TabItem>
                <TabItem Header="Load Port 3">
                    <Label Content="Load port 3 table" />
                </TabItem>
                <TabItem Header="Load Port 4">
                    <Label Content="Load port 4 table" />
                </TabItem>
                <TabItem Header="Alarms">
                    <Label Content="Alarm history for this run here..." />
                </TabItem>
                <TabItem Header="Logs">
                    <Label Content="Log history for this run here..." />
                </TabItem>               
            </TabControl>            
        </StackPanel>

        <!--<view:RightSideButtonView Grid.Row="0" Grid.Column="1" />-->
        
        <StackPanel Grid.Row="1" Grid.Column="0" 
            Margin="10,5,10,5" Background="{DynamicResource ResourceKey=BlackGlass3b}" Orientation="Vertical">
            <!--<Canvas>
                <Ellipse Canvas.Top="50" Canvas.Left="50"
                  Fill="Red" Height="25" Width="25" />              
            </Canvas>-->
            <StackPanel Orientation="Horizontal" Margin="0,55,0,0" >
                <Button ToolTip="Exit FAS program"
                                    Background="{StaticResource ResourceKey=BlackGlass}"
                                    Command="{Binding Path=ExitHostCmd}"
                                    Content="Exit Host" 
                                    Foreground="White" />
                <Button ToolTip="Open up Camstar internal website"
                                    Background="{StaticResource ResourceKey=BlackGlass}"
                                    Command="{Binding Path=CamstarCmd}"
                                    Content="Camstar" 
                                    Foreground="White" />
            </StackPanel>
        </StackPanel>
        
        <view:InterfaceStatusView Grid.Row="1" Grid.Column="1" />       

        <StackPanel x:Name="entryPanel" 
                    Grid.Row="0" Grid.RowSpan="2"
                    Grid.Column="0" Grid.ColumnSpan="2"
                    Margin="-1000,0,0,0"
                    HorizontalAlignment="Left">
            <StackPanel.RenderTransform>
                <TranslateTransform />
            </StackPanel.RenderTransform>
            <view:EntryView x:Name="entryView"
                                    Width="1000" />
        </StackPanel>

        <StackPanel x:Name="waferPanel"
                    Grid.Row="0"
                    Grid.RowSpan="2"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Margin="-1000,0,0,0"
                    HorizontalAlignment="Left">
            <StackPanel.RenderTransform>
                <TranslateTransform />
            </StackPanel.RenderTransform>
            <view:WaferConfirmationView x:Name="waferView"
                                    Width="1000" />
        </StackPanel>
        
        <!--<Viewbox Width="60" 
                             Margin="-380,35,0,0" >
            <progress:CircularProgressBar Visibility="{Binding IsRetrieveBusy, Converter={StaticResource ResourceKey=BooleanToVisibleConverter}}" />
        </Viewbox>-->
    </Grid>
</Window>
